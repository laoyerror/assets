<!DOCTYPE html>
<html lang="zh-CN">
<!-- 个人使用，代码来自http://www.totootool.com/json.html -->

<head>
    <meta charset="UTF-8">
    <title>JSON格式化</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="JSON格式化着色工具">
    <meta name="keywords" content="在线JSON格式化, JSON美化, JSON着色, JSON Formatter">
    <link rel="shortcut icon" href="https://static.laoyee.app/dh/favicon.ico">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/totootool_v2.css">
    <link rel="stylesheet" href="css/json.css">
</head>

<body>
    <div id="ToTooTool" class="desktopForce">
        <!-- <totootool-menu active="jsonFormatter"></totootool-menu> -->
        <div id="mainBody" class="container-fluid d-inline-flex align-items-stretch">
            <div id="mainBodyRow" class="row w-100">
                <div id="rawJsonPanel" class="col-6 col-lg-5 offset-lg-1">
                    <textarea id="rawJsonPanelContent" v-model="rawJson" v-on:keyup="dealFormat"
                        placeholder="请在此处输入JSON字符串"></textarea>
                </div>
                <div id="formattedJsonPanel" class="col-6 col-lg-5">
                    <pre id="formattedJsonPanelContent" class="CodeContainer" v-html="formattedJsonHtml"></pre>
                </div>
            </div>
        </div>
        <!-- <totootool-footer></totootool-footer> -->
    </div>
</body>

<script src="js/jquery.slim.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/vue.min.js"></script>
<script src="js/jsontool.js"></script>
<script src="js/json.js"></script>
<script language="JavaScript">
    new Vue({
        extends: ToTooTool,
        data: {
            helloJson: "{'Hello':'Hello World'}",
            rawJson: "",
            formattedJsonHtml: "",
        },
        methods: {
            dealFormat: function () {
                this.formatJson(this.rawJson);
            },
            formatJson: function (json) {
                if (json.trim() != "") {
                    try {
                        this.formattedJsonHtml = format(json);
                    } catch (e) {
                        this.showErrorInfo();
                    }
                } else {
                    this.formattedJsonHtml = this.formatJson(this.helloJson);
                }
            },
            showErrorInfo: function () {
                this.formattedJsonHtml = "<div class='alert alert-danger'>JSON字符串格式错误</div>";
            }
        },
        mounted: function () {
            this.formatJson(this.helloJson);
        }
    });
</script>

</html>